SET SERVEROUTPUT ON
SET VERIFY OFF

SELECT * FROM DD_PRODUIT;
ACCEPT NUMPROD_ PROMPT "Entrez le produit que vous voulez supprimer: "
DECLARE
	NUMPROD__ CHAR(7) := '&NUMPROD_';
	TABLE_INEXISTANTE EXCEPTION;
	NB number(1) := 0;
BEGIN
	SELECT COUNT(NUMPROD) INTO NB FROM DD_PRODUIT WHERE NUMPROD = NUMPROD__;
	IF NB > 0 THEN		
		INSERT INTO DD_PRODUITSUPPRIMES(NUMPROD, NOM, NUMCAT)
		  SELECT NUMPROD, NOM, NUMCAT FROM DD_PRODUIT WHERE NUMPROD = NUMPROD__;
		COMMIT;
		DELETE FROM DD_PRODUIT WHERE NUMPROD = NUMPROD__;
		COMMIT;
	ELSE
		RAISE TABLE_INEXISTANTE;	
	END IF;

	

EXCEPTION 
	WHEN TABLE_INEXISTANTE THEN
	DBMS_OUTPUT.PUT_LINE('Le produit n''existe pas');
END;
/

SET VERIFY ON

PROMPT Appuyer sut une touche ...
PAUSE
@C:\Users\usager\Desktop\base\PROJET_FINAL2\menu.sql
