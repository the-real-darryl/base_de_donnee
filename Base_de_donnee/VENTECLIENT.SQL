SET SERVEROUTPUT ON
SET VERIFY OFF

ACCEPT CLIENT_ PROMPT "entrez le numero de client : "
ACCEPT PROD_ PROMPT "entrez le numero de production : "
ACCEPT DATE_ PROMPT "entrez la date : "
ACCEPT QUANTITE_ PROMPT "entrez la quantite vendu : "
ACCEPT PRIX_ PROMPT "entrez le prix : "


DECLARE
    INTEGRITE EXCEPTION;
    PRAGMA EXCEPTION_INIT(INTEGRITE,-2291);
BEGIN
    INSERT INTO DD_VENTECLIENT VALUES(CODEVENTESEQUENCE.NEXTVAL,'&CLIENT_','&PROD_',TO_DATE('&DATE_','YY/MM/DD'),
    '&QUANTITE_','&PRIX_');

    

EXCEPTION 
    WHEN DUP_VAL_ON_INDEX THEN 
    DBMS_OUTPUT.PUT_LINE('LE NUMPROD EXISTE DEJA');
    WHEN INTEGRITE THEN 
    DBMS_OUTPUT.PUT_LINE('LE NUMCLIENT OU LE NUMPROD NE CONCORDE PAS AVEC CEUX EXISTANT DANS LES AUTRES TABLES');
    WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('UNE ERREUR S''EST PRODUITE');

END;
/

SET VERIFY ON
@C:\Users\usager\Desktop\base\PROJET_FINAL2\menu.sql